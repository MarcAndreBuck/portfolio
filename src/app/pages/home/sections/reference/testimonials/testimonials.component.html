<section class="testimonials">
  <h2 class="testimonials__title">
    {{ lang.dict().references.title }}
  </h2>

  <div class="carousel">
    <div
      class="stage"
      aria-live="polite"
      aria-atomic="true"
    >
      <article
        *ngFor="let t of references(); let i = index; trackBy: trackByIndex"
        class="card"
        [class.is-active]="getCardState(i) === 'active'"
        [class.is-prev]="getCardState(i) === 'prev'"
        [class.is-next]="getCardState(i) === 'next'"
        [class.is-hidden]="getCardState(i) === 'hidden'"
        role="button"
        tabindex="0"
        [attr.aria-label]="lang.dict().references.aria.card"
        (click)="getCardState(i) !== 'active' && onCardClick(i)"
        (keydown.enter)="getCardState(i) !== 'active' && onCardClick(i)"
        (keydown.space)="getCardState(i) !== 'active' && onCardClick(i)"
      >
        <p class="card__text">
          {{ t.text }}
        </p>

        <div class="card__footer">
          <span class="line"></span>
          <span class="sig">
            {{ t.author }} â€“ {{ t.role }}
          </span>
        </div>
      </article>
    </div>
  </div>

  <div
    class="dots"
    role="tablist"
    [attr.aria-label]="lang.dict().references.aria.list"
  >
    <button
      class="nav nav--left"
      type="button"
      (click)="prev()"
      [attr.aria-label]="lang.dict().references.aria.prev"
    >
      <app-icon name="arrow-back" class="icons"></app-icon>
    </button>

    <button
      *ngFor="let _ of references(); let i = index"
      type="button"
      class="dot"
      role="tab"
      [class.is-active]="i === activeIndex"
      (click)="goTo(i)"
      [attr.aria-label]="lang.dict().references.aria.goto(i + 1)"
      [attr.aria-selected]="i === activeIndex"
    ></button>

    <button
      class="nav nav--right"
      type="button"
      (click)="next()"
      [attr.aria-label]="lang.dict().references.aria.next"
    >
      <app-icon name="arrow-next" class="icons"></app-icon>
    </button>
  </div>
</section>
